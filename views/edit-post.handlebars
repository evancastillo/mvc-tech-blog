<article class="mb-5">
  <p class="mb-4"><a href="/dashboard"> &larr; Back to dashboard</a></p>
  <h2>{{#if post.id}}Edit{{else}}New{{/if}} Post</h2>

  <form class="edit-post-form mt-2 pt-3">
    <div class="mb-3">
      <input type="text" name="post-title" class="form-control" {{#if post.id}}value="{{post.title}}" {{/if}}
        placeholder="Post Title" />
    </div>
    <div class="mb-2">
      <textarea name="post-body" class="form-control" rows="5"
        placeholder="Post content...">{{#if post.body}}{{post.body}}{{/if}}</textarea>
    </div>
    <div class="mb-3">
      {{#if post.id}}
      <p class="p-1">
        by you on {{format_date post.created_at}}
        |
        <a href="/post/{{post.id}}">{{post.comments.length}} {{format_plural 'comment' post.comments.length}}</a>
      </p>
      {{/if}}
    </div>
    <div class="mb-3">
      <button type="submit" class="btn btn-primary">Save post</button>
      {{#if post.id}}<button type="button" class="btn btn-danger delete-post-btn">Delete post</button>{{/if}}
    </div>
  </form>
</article>

{{#if post.id}}
{{> comments comments=post.comments loggedIn=loggedIn}}
{{/if}}

<script src="/javascript/edit-post.js"></script>
{{#if post.id}}
<script src="/javascript/delete-post.js"></script>
<script src="/javascript/comment.js"></script>
{{/if}}